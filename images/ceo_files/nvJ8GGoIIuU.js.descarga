;/*FB_PKG_DELIM*/

__d("CometUFICommentTopReactionsWrapper_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFICommentTopReactionsWrapper_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_top_reactions",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFICommentTopReactions_feedback"}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("DOMIntersection",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.getBoundingClientRect();b=b.getBoundingClientRect();return!(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom)}f.isIntersecting=a}),66);
__d("queryThenMutateDOM",["ErrorUtils","Run","TimeSlice","emptyFunction","gkx","requestAnimationFrame"],(function(a,b,c,d,e,f){var g,h,i,j=[],k={};function l(a,c,d){if(!a&&!c)return{cancel:b("emptyFunction")};if(d&&Object.prototype.hasOwnProperty.call(k,d))return{cancel:b("emptyFunction")};else d&&(k[d]=1);c=b("TimeSlice").guard(c||b("emptyFunction"),"queryThenMutateDOM mutation callback",{propagationType:b("TimeSlice").PropagationType.CONTINUATION,registerCallStack:!0});a=b("TimeSlice").guard(a||b("emptyFunction"),"queryThenMutateDOM query callback",{propagationType:b("TimeSlice").PropagationType.CONTINUATION,registerCallStack:!0});var e={queryFunction:a,mutateFunction:c,output:null,deleted:!1};j.push(e);n();h||(h=!0,b("gkx")("20935")||b("Run").onLeave(function(){h=!1,i=!1,k={},j.length=0}));return{cancel:function(){e.deleted=!0,d&&delete k[d]}}}l.prepare=function(a,b,c){return function(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];e.unshift(this);var g=Function.prototype.bind.apply(a,e),h=b.bind(this);l(g,h,c)}};var m=b("TimeSlice").guard(function(){while(j.length){k={};var a=[];window.document.body.getClientRects();while(j.length){var b=j.shift();b.deleted||(b.output=o(b.queryFunction),a.push(b))}while(a.length){b=a.shift();b.deleted||o(b.mutateFunction,null,[b.output])}}i=!1},"queryThenMutateDOM runScheduledQueriesAndMutations",{propagationType:b("TimeSlice").PropagationType.ORPHAN});function n(){!i&&j.length&&(i=!0,b("requestAnimationFrame")(m))}function o(a,c,d,e,f){return(g||(g=b("ErrorUtils"))).applyWithGuard(a,c,d,e,f)}e.exports=l}),null);
__d("CometUFICommentTopReactionsWrapper.react",["CometRelay","CometUFICommentTopReactions.react","CometUFICommentTopReactionsWrapper_feedback.graphql","DOMIntersection","Locale","intersectionObserverEntryIsIntersecting","observeIntersection","queryThenMutateDOM","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useEffect,m=e.useLayoutEffect,n=e.useRef;function a(a){var e,f=a.avoidableElementBorderingBottom,g=a.children;a=a.feedback;var i=d("CometRelay").useFragment(h!==void 0?h:h=b("CometUFICommentTopReactionsWrapper_feedback.graphql"),a),o=n(null),p=n(null),q=n(!1),r=n(null),s=n(null),t=n([]),u=k(function(){var a=s.current,b=f.current,e=o.current,g=r.current,h=q.current;if(a!==null||!b||!e||!g||!h)return;var j=!1,k=c("queryThenMutateDOM")(function(){j=d("DOMIntersection").isIntersecting(b,g)},function(){j!==a&&(j===!0&&(e.style.alignSelf="flex-end",e.style.bottom="0",d("Locale").isRTL()?(e.style.left="0",e.style.marginRight="-8px"):(e.style.right="0",e.style.marginLeft="-8px"),e.style.marginBottom="4px",e.style.position="relative"),e.style.visibility="inherit",s.current=j,p.current!=null&&(p.current.remove(),p.current=null))},"CometUFICommentTopReactionsWrapper_"+((h=i.id)!=null?h:"UNKNOWN"));t.current.push({remove:function(){k&&k.cancel(),k=null}})},[f,i.id]);a=k(function(a){o.current=a,a==null&&(s.current=null),u()},[u]);var v=k(function(){p.current!=null&&(p.current.remove(),p.current=null),r.current&&(p.current=c("observeIntersection")(r.current,function(a){q.current=c("intersectionObserverEntryIsIntersecting")(a),u()},{rootMargin:"1000px"}),t.current.push(p.current))},[u]);l(function(){var a=t.current;v();return function(){a.forEach(function(a){a.remove()}),a.length=0}},[v]);m(function(){u()},[u]);e=i.should_show_top_reactions!=null?i.should_show_top_reactions:Boolean((e=i.reactors)==null?void 0:e.count);return j.jsxs("div",{className:"x3nfvp2 x1n2onr6 xxymvpz xh8yej3",children:[j.jsx("div",{className:"xdl72j9 x1iyjqo2 xs83m0k xeuugli xh8yej3",children:g}),e?j.jsx("div",{className:"x1ve5b48 x177n6bx x10l6tqk x1ja2u2z xlshs6z",ref:a,children:j.jsx(c("CometUFICommentTopReactions.react"),{feedback:i,rootRef:function(a){r.current!==a&&(r.current=a,v())}})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometUFIShareActionLinkMenuQuery$Parameters",["CometUFIShareActionLinkMenuQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometUFIShareActionLinkMenuQuery_facebookRelayOperation"),metadata:{},name:"CometUFIShareActionLinkMenuQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometUFIShareActionLinkMenu.entrypoint",["CometUFIShareActionLinkMenuQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var c=a.feedLocation,d=a.qe_optional_share_to_page,e=a.storyUrl;a=a.url;return{extraProps:{},queries:{shareMenuQueryReference:{parameters:b("CometUFIShareActionLinkMenuQuery$Parameters"),variables:{feedLocation:c,hasParentStory:e!=null,qe_optional_share_to_page:(c=d)!=null?c:!1,shareableParams:{url:a},storyParams:{url:e}}}}}},root:c("JSResourceForInteraction")("CometUFIShareActionLinkMenu.react").__setRef("CometUFIShareActionLinkMenu.entrypoint")};g["default"]=a}),98);
__d("CometUFIShareAction_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFIShareAction_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_show_reshare_warning",storageKey:null}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("CometUFIShareAction_shareable.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFIShareAction_shareable",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}],type:"Story",abstractKey:null},{args:null,kind:"FragmentSpread",name:"CometUFIShareActionLinkMenu_shareable"}],type:"Entity",abstractKey:"__isEntity"};e.exports=a}),null);
__d("CometUFIShareAction_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFIShareAction_story",selections:[{args:null,kind:"FragmentSpread",name:"CometUFIShareActionLinkMenu_story"},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_links",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"link_type",storageKey:null}],type:"LinkOpenActionLink",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("CometUFIShareAction.react",["CometEntryPointPopoverTrigger.react","CometPressable.react","CometRelay","CometTrackingNodeProvider.react","CometUFIShareActionLinkMenu.entrypoint","CometUFIShareAction_feedback.graphql","CometUFIShareAction_shareable.graphql","CometUFIShareAction_story.graphql","CometUFISharePopoverContext.react","ReshareWarningCometDialog.entrypoint","cometGetKeyCommandConfig","cr:1761713","gkx","react","recoverableViolation","requireDeferred","useCometEntryPointDialog","useKeyCommands","useMergeRefs","useShareLogger","useUnifiedShareSheetLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));e=k;var m=e.useCallback,n=e.useContext,o=e.useMemo,p=e.useRef,q=e.useState,r=c("requireDeferred")("ShareMetricsLoggingController").__setRef("CometUFIShareAction.react"),s={circularButton:{borderTopColor:"x1l1xfun",borderEndColor:"xv160w3",borderBottomColor:"xwwskcc",borderStartColor:"xsb8bxb",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",height:"x90ne7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"x1691je0",$$css:!0}};function t(a){var b=a.children;a=a.refs;return b(c("useMergeRefs").apply(void 0,a))}t.displayName=t.name+" [from "+f.id+"]";function u(){var a=p(null),b=m(function(){var b=a.current;b!=null&&b.click()},[]),e=o(function(){return[d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("newsfeed","shareStory",b)]},[b]);c("useKeyCommands")(e,!0);return a}function a(a){var e=a.buttonVariant,f=e===void 0?"DEFAULT":e,g=a.children;e=a.feedback;var k=a.feedLocation,o=a.onPress,v=a.parentStory,w=a.productData;a=a.shareable;e=d("CometRelay").useFragment(h!==void 0?h:h=b("CometUFIShareAction_feedback.graphql"),e);var x=n(c("CometUFISharePopoverContext.react"));x=x.ufiSharePopoverRef;var y=d("CometRelay").useFragment(i!==void 0?i:i=b("CometUFIShareAction_story.graphql"),v),z=d("CometRelay").useFragment(j!==void 0?j:j=b("CometUFIShareAction_shareable.graphql"),a);v=q(!e.should_show_reshare_warning);var A=v[0],B=v[1],C=p(null);v=c("useCometEntryPointDialog")(c("ReshareWarningCometDialog.entrypoint"),{feedbackID:(a=e.id)!=null?a:""});var D=v[0],E=m(function(a){D({},function(b){B(b),b&&a()})},[D]),F=p(!1),G=u();e=c("useUnifiedShareSheetLogger")();var H=e.onCloseDropdownMenu;a=c("useShareLogger")();var I=a.onOpenSharesheetButtonClicked,J=(e=(v=z==null?void 0:z.post_id)!=null?v:y==null?void 0:y.post_id)!=null?e:z==null?void 0:z.id,K=m(function(){var a;return I({entry_point:k,feed_tracking:[(a=y==null?void 0:y.tracking)!=null?a:""],shareable_entity_fbid:J,sharing_component_name:"ufi_share_button"})},[k,I,y==null?void 0:y.tracking,J]);if(z.url==null){c("recoverableViolation")("Can't render a share button without a `url`","ufi2");return null}a=function(a){F.current&&!a?(r.onReady(function(a){a.logShareFlowAbandoned(z.id,k)}),H({entry_point:k,shareable_entity_fbid:J,sharing_component_name:"facebook_sharesheet"})):!F.current&&a&&r.onReady(function(a){a.logShareFlowStarted(z.id,k)}),F.current=a};v=y!=null?{feedLocation:k,parentStory:y,productData:w,shareable:z}:{feedLocation:k,productData:w,shareable:z};e=(y==null?void 0:(e=y.attachments)==null?void 0:(w=e[0])==null?void 0:(e=w.action_links)==null?void 0:(w=e[0])==null?void 0:w.link_type)==="VIEW_INSTAGRAM_PROFILE"&&c("gkx")("772")?y==null?void 0:y.url:z.url;return l.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:17,children:l.jsx(c("CometEntryPointPopoverTrigger.react"),{align:"middle",entryPointParams:{feedLocation:k,qe_optional_share_to_page:c("gkx")("22883"),url:e},imperativeRef:x,onVisibilityChange:a,otherProps:v,popoverEntryPoint:c("CometUFIShareActionLinkMenu.entrypoint"),preloadTrigger:"button_aggressive",children:function(a,d,e,h,i,j){return l.jsx(t,{refs:[a,C,G],children:function(a){return l.jsx(c("CometPressable.react"),{label:b("cr:1761713"),onHoverIn:h,onHoverOut:i,onPress:function(){A?d():E(d),o==null?void 0:o(),K()},onPressIn:j,overlayRadius:4,preventContextMenu:!0,ref:a,testid:void 0,xstyle:f==="CIRCULAR"&&s.circularButton,children:g})}})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);